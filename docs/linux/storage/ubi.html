<!DOCTYPE html>

<meta charset="utf-8">

<link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/6.0.0/normalize.min.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Lato|Source+Code+Pro:500" rel="stylesheet">
<link href="/static/css/main.css" rel="stylesheet">


<link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/styles/atom-one-light.min.css" rel="stylesheet">


<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>


<title>UBI</title>

<meta name="author" content="Clay McClure">
<meta name="description" content="Compendium of computing articles focused on embedded Linux, networking, and C, C++, and Python programming.">


<div class="document">
  <div class="documentwrapper">
    <div class="contentwrapper">
      <main class="content">
        <h1 id="UBI">UBI</h1>
<p>UBI provides a logical volume management (LVM) layer on top of raw flash
devices. UBI volumes are defined in terms of logical erase blocks (LEBs),
which UBI maps to the physical erase blocks (PEBs) on the NAND device.</p>
<p>UBI transpartently manages block wear leveling, bad blocks, and bit flips,
freeing higher layer software from these concerns.</p>
<h2 id="Physical-Erase-Block-layout">Physical Erase Block layout</h2>
<pre><code class="nohighlight">┌─────┬─────┬──────────────────────────────────────────────────┐
│ EC  │ VID │ User data (LEB)                                  │
└─────┴─────┴──────────────────────────────────────────────────┘
↑     ↑     ↑
│     │     │
│     │     └── offset determined by flash min. I/O unit
│     └──────── offset determined by flash min. I/O unit or NAND sub-page
└────────────── offset 0

EC:  Erase counter header (64 bytes)
VID: Volume ID header (64 bytes)
</code></pre>

      </main>
      <footer>
        Copyright © 2018 <a href="http://claymation.me">Clay McClure</a>. Made with <a href="https://claymation.github.io/void/">void</a>.
      </footer>
    </div>
  </div>

  <div class="sidebar">
    <div class="sidebarwrapper">
      <a href="/"><img src="/static/images/tuxdemon.png" width=160 height=160 alt="Tux (the Linux penguin) with daemon horns"></a>
      <section class="toc">
        <h2>Table of Contents</h2>
        
        
          
            <ul><li>
          
          <a href="#UBI">UBI</a>
          
          
        
          
            <ul><li>
          
          <a href="#Physical-Erase-Block-layout">Physical Erase Block layout</a>
          
          
        
        
          </li></ul>
        
          </li></ul>
        
      </section>
    </div>
  </div>
</div>

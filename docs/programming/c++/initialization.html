<!DOCTYPE html>

<meta charset="utf-8">

<link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/6.0.0/normalize.min.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Lato|Source+Code+Pro:500" rel="stylesheet">
<link href="/static/css/main.css" rel="stylesheet">


<link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/styles/atom-one-light.min.css" rel="stylesheet">


<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>


<title>Initialization</title>

<meta name="author" content="Clay McClure">
<meta name="description" content="Compendium of computing articles focused on embedded Linux, networking, and C, C++, and Python programming.">


<div class="document">
  <div class="documentwrapper">
    <div class="contentwrapper">
      <main class="content">
        <h1 id="Initialization">Initialization</h1>
<h3 id="Automatic-objects">Automatic objects</h3>
<p>C++ initializes automatic (local) variables of class type at the point of declaration, and deletes such variables when they go out of scope:</p>
<div class="row">
<div class="column">
<pre><code class="language-c++">#include &lt;iostream&gt;

struct T {
    T() { std::cout &lt;&lt; __func__ &lt;&lt; std::endl; }
    ~T() { std::cout &lt;&lt; __func__ &lt;&lt; std::endl; }
};

int main(int argc, char *argv[])
{
    for (int i = 0; i &lt; 3; ++i)
    {
        T t;
    }
}
</code></pre>
</div>
<div class="column">
<pre><code class="language-txt">T
~T
T
~T
T
~T
</code></pre>
</div>
</div>
<p>Automatic variables of built-in type are not initialized.</p>
<h3 id="Heap-objects">Heap objects</h3>
<p>Similarly, objects of class type on the heap are initialized by <code>operator new</code> and deleted by <code>operator delete</code>:</p>
<div class="row">
<div class="column">
<pre><code class="language-c++">#include &lt;iostream&gt;

struct T {
    T() { std::cout &lt;&lt; __func__ &lt;&lt; std::endl; }
    ~T() { std::cout &lt;&lt; __func__ &lt;&lt; std::endl; }
};

int main(int argc, char *argv[])
{
    for (int i = 0; i &lt; 3; ++i) {
        T *t = new T;
        delete t;
    }
}
</code></pre>
</div>
<div class="column">
<pre><code class="language-txt">T
~T
T
~T
T
~T
</code></pre>
</div>
</div>
<p>As before, obejcts of built-in type on the heap are not initialized.</p>
<h3 id="Static-objects">Static objects</h3>
<p>Objects of class type with static storage duration (that is, global variables, static local variables, and static class members) are initialized once before first use and deleted at program termination:</p>
<div class="row">
<div class="column">
<pre><code class="language-c++">#include &lt;iostream&gt;

struct T {
    T() { std::cout &lt;&lt; __func__ &lt;&lt; std::endl; }
    ~T() { std::cout &lt;&lt; __func__ &lt;&lt; std::endl; }
};

void func(void)
{
    static T t;
}

int main(int argc, char *argv[])
{
    for (int i = 0; i &lt; 3; ++i)
    {
        func();
    }
}
</code></pre>
</div>
<div class="column">
<pre><code class="language-txt">T
~T
</code></pre>
</div>
</div>
<p>Objects of built-in type with static storage duration are initialized as in C: they're zero-initialized by the program loader or the language run-time.</p>

      </main>
      <footer>
        Copyright Â© 2018 <a href="http://claymation.me">Clay McClure</a>. Made with <a href="https://claymation.github.io/void/">void</a>.
      </footer>
    </div>
  </div>

  <div class="sidebar">
    <div class="sidebarwrapper">
      <a href="/"><img src="/static/images/tuxdemon.png" width=160 height=160 alt="Tux (the Linux penguin) with daemon horns"></a>
      <section class="toc">
        <h2>Table of Contents</h2>
        
        
          
            <ul><li>
          
          <a href="#Initialization">Initialization</a>
          
          
        
          
            <ul><li>
          
          <a href="#Automatic-objects">Automatic objects</a>
          
          
        
          
            </li><li>
          
          <a href="#Heap-objects">Heap objects</a>
          
          
        
          
            </li><li>
          
          <a href="#Static-objects">Static objects</a>
          
          
        
        
          </li></ul>
        
          </li></ul>
        
          </li></ul>
        
      </section>
    </div>
  </div>
</div>
